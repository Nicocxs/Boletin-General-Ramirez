<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bolet√≠n Comunitario - General Ramirez</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<style>
:root{
  --primary:#2e8b57;
  --secondary:#3cb371;
  --accent-gradient:linear-gradient(135deg,#f4a261,#e76f51);
  --bg:#f9f9f9;
  --card:#fff;
  --text:#333;
  --light-text:#555;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;scroll-behavior:smooth;}
header{
  background:url('https://source.unsplash.com/1600x600/?village') no-repeat center/cover;
  color:white;padding:120px 20px 80px;text-align:center;position:relative;overflow:hidden;
}
header::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);}
header h1{position:relative;font-family:'Poppins',sans-serif;font-weight:600;font-size:3rem;z-index:1;}
nav{background:var(--secondary);display:flex;justify-content:center;flex-wrap:wrap;position:sticky;top:0;z-index:1000;}
nav a{color:white;text-decoration:none;padding:15px 25px;font-weight:500;transition:0.3s;}
nav a:hover{background:var(--primary);border-radius:5px;}
section{padding:60px 20px;max-width:1000px;margin:auto;}
section h2{font-family:'Poppins',sans-serif;font-weight:600;font-size:2.5rem;color:var(--primary);margin-bottom:40px;text-align:center;}
.card{background:var(--card);padding:25px;margin:20px 0;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
.card h3{color:var(--secondary);margin-bottom:10px;}
.card p{color:var(--light-text);}
.btn{display:inline-block;background:var(--accent-gradient);color:white;padding:12px 25px;border-radius:8px;text-decoration:none;font-weight:500;transition:0.3s;}
.btn:hover{background:var(--secondary);}
form{display:flex;flex-direction:column;gap:15px;max-width:500px;margin:auto;}
input,textarea,select{padding:14px;border-radius:8px;border:1px solid #ccc;font-size:1rem;}
button{background:var(--primary);color:white;border:none;padding:14px;border-radius:8px;font-size:1rem;cursor:pointer;}
button:hover{background:var(--secondary);}
footer{text-align:center;padding:30px;background:var(--primary);color:white;margin-top:50px;}
.comment-box{margin-top:15px;}
.comment{background:#f1f1f1;padding:10px;margin:5px 0;border-radius:6px;}
.hidden{display:none;}
</style>
</head>
<body>

<header>
  <h1>Bolet√≠n Comunitario - General Ramirez</h1>
</header>

<nav>
  <a href="#noticias"><i class="fas fa-newspaper"></i> Noticias</a>
  <a href="#eventos"><i class="fas fa-calendar-alt"></i> Eventos</a>
  <a href="#anuncios"><i class="fas fa-bullhorn"></i> Anuncios</a>
  <a href="#contacto"><i class="fas fa-envelope"></i> Contacto</a>
  <a href="#login"><i class="fas fa-user"></i> Iniciar Sesi√≥n</a>
</nav>

<!-- Noticias -->
<section id="noticias">
  <h2>Noticias Recientes</h2>
  <div id="noticias-list"></div>
</section>

<!-- Eventos -->
<section id="eventos">
  <h2>Eventos</h2>
  <div id="eventos-list"></div>
</section>

<!-- Anuncios -->
<section id="anuncios">
  <h2>Anuncios de vecinos</h2>
  <div id="anuncios-list"></div>
</section>

<!-- Publicar -->
<section id="publicar">
  <h2>Publicar</h2>
  <form id="postForm" class="hidden">
    <input type="text" id="titulo" placeholder="T√≠tulo" required>
    <textarea id="contenido" placeholder="Contenido" rows="4" required></textarea>
    <select id="categoria" required>
      <option value="">Selecciona categor√≠a</option>
      <option value="noticias">Noticias</option>
      <option value="eventos">Eventos</option>
      <option value="anuncios">Anuncios</option>
    </select>
    <button type="submit">Publicar</button>
  </form>
  <p id="msgLogin" style="text-align:center;">üîí Debes iniciar sesi√≥n para publicar</p>
</section>

<!-- Login / Registro -->
<section id="login">
  <h2>Registro / Inicio de Sesi√≥n</h2>
  <form id="registerForm">
    <h3>Registrarse</h3>
    <input type="text" id="regUser" placeholder="Usuario" required>
    <input type="email" id="regEmail" placeholder="Correo electr√≥nico" required>
    <input type="password" id="regPass" placeholder="Contrase√±a" required>
    <button type="submit">Registrarse</button>
  </form>
  <br>
  <form id="loginForm">
    <h3>Iniciar Sesi√≥n</h3>
    <input type="text" id="logUser" placeholder="Usuario" required>
    <input type="password" id="logPass" placeholder="Contrase√±a" required>
    <button type="submit">Iniciar Sesi√≥n</button>
  </form>
  <p id="welcome" style="text-align:center;margin-top:20px;"></p>
</section>

<footer>
  <p>Bolet√≠n Comunitario ¬© 2025 | General Ramirez</p>
</footer>

<script>
// ---------------- USUARIOS ----------------
let currentUser = null;
let users = JSON.parse(localStorage.getItem("users")) || [];

// Registro
document.getElementById("registerForm").addEventListener("submit", e=>{
  e.preventDefault();
  const user = document.getElementById("regUser").value;
  const email = document.getElementById("regEmail").value;
  const pass = document.getElementById("regPass").value;
  if(users.find(u=>u.user===user)){ alert("‚ö†Ô∏è Usuario ya existe"); return; }
  users.push({user,email,pass});
  localStorage.setItem("users", JSON.stringify(users));
  alert("‚úÖ Registro exitoso, ahora inicia sesi√≥n");
});

// Login
document.getElementById("loginForm").addEventListener("submit", e=>{
  e.preventDefault();
  const user = document.getElementById("logUser").value;
  const pass = document.getElementById("logPass").value;
  const u = users.find(u=>u.user===user && u.pass===pass);
  if(u){
    currentUser = u;
    document.getElementById("welcome").innerText = `üëã Bienvenido ${u.user}`;
    document.getElementById("postForm").classList.remove("hidden");
    document.getElementById("msgLogin").style.display="none";
  } else {
    alert("‚ùå Usuario o contrase√±a incorrectos");
  }
});

// ---------------- PUBLICACIONES ----------------
let posts = JSON.parse(localStorage.getItem("posts")) || [];

function renderPosts(){
  document.getElementById("noticias-list").innerHTML="";
  document.getElementById("eventos-list").innerHTML="";
  document.getElementById("anuncios-list").innerHTML="";
  posts.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`<h3>${p.titulo}</h3><p>${p.contenido}</p><small>Publicado por ${p.user}</small>
    <div class="comment-box">
      <input type="text" placeholder="Escribe un comentario" id="cmt-${i}">
      <button onclick="addComment(${i})">Comentar</button>
      <div id="comments-${i}">${p.comentarios.map(c=>`<div class='comment'>${c}</div>`).join("")}</div>
    </div>`;
    document.getElementById(p.categoria+"-list").appendChild(div);
  });
}
renderPosts();

// Publicar
document.getElementById("postForm").addEventListener("submit", e=>{
  e.preventDefault();
  if(!currentUser){ alert("Debes iniciar sesi√≥n"); return; }
  const titulo=document.getElementById("titulo").value;
  const contenido=document.getElementById("contenido").value;
  const categoria=document.getElementById("categoria").value;
  if(!categoria){ alert("‚ö†Ô∏è Debes seleccionar categor√≠a"); return; }
  posts.push({titulo,contenido,categoria,user:currentUser.user,comentarios:[]});
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
  e.target.reset();
});

// ---------------- COMENTARIOS ----------------
function addComment(i){
  const input=document.getElementById(`cmt-${i}`);
  if(!input.value) return;
  posts[i].comentarios.push(`${currentUser?currentUser.user:"An√≥nimo"}: ${input.value}`);
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}
</script>

</body>
</html>
